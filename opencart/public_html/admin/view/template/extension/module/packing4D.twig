{{ header }}{{ column_left }}
<div id="content">
  <div class="page-header">
    <div class="container-fluid">
      <div class="pull-right">
        <button type="submit" form="form-module" data-toggle="tooltip" title="{{ button_save }}" class="btn btn-primary"><i class="fa fa-save"></i></button>
        <a href="{{ cancel }}" data-toggle="tooltip" title="{{ button_cancel }}" class="btn btn-default"><i class="fa fa-reply"></i></a></div>
      <h1>{{ heading_title }}</h1>
      <ul class="breadcrumb">
        {% for breadcrumb in breadcrumbs %}
          <li><a href="{{ breadcrumb.href }}">{{ breadcrumb.text }}</a></li>
        {% endfor %}
      </ul>
    </div>
  </div>
  <div class="container-fluid">
    {% if error_warning %}
      <div class="alert alert-danger alert-dismissible"><i class="fa fa-exclamation-circle"></i> {{ error_warning }}
        <button type="button" class="close" data-dismiss="alert">&times;</button>
      </div>
    {% endif %}
    <div class="panel panel-default">
      <div class="panel-heading">
        <h3 class="panel-title"><i class="fa fa-pencil"></i> {{ text_edit }}</h3>
      </div>
      <div class="panel-body">
        <form action="{{ action }}" method="post" enctype="multipart/form-data" id="form-module" class="form-horizontal">
          <div class="form-group">
            <label class="col-sm-2 control-label" for="input-status">{{ entry_status }}</label>
            <div class="col-sm-12">
              <div>
                <h4>{{ text_supported_shipping }}</h4>
                <div>
                  {% for shipping in supported_modules %}
                    <div><a target="_blank" href="{{ shipping.link }}">{{ shipping.name }}</a></div>
                  {% endfor %}
                </div>
              </div>
              {% if shipping_methods %}
              <div class="table-responsive">
                <table id="boxes" class="table table-striped table-bordered table-hover">
                  <thead>
                  <tr>
                    <td class="text-center">{{ entry_reference }}</td>
                    <td class="text-center">{{ entry_outerWidth }} <br><font style="color:#FF0000;font-size:14px">({{ default_length_class }})</font></td>
                    <td class="text-center">{{ entry_outerLength }} <br><font style="color:#FF0000;font-size:14px">({{ default_length_class }})</font></td>
                    <td class="text-center">{{ entry_outerDepth }} <br><font style="color:#FF0000;font-size:14px">({{ default_length_class }})</font></td>
                    <td class="text-center">{{ entry_emptyWeight }} <br><font style="color:#FF0000;font-size:14px">({{ default_weight_class }})</font></td>
                    <td class="text-center">{{ entry_innerWidth }} <br><font style="color:#FF0000;font-size:14px">({{ default_length_class }})</font></td>
                    <td class="text-center">{{ entry_innerLength }} <br><font style="color:#FF0000;font-size:14px">({{ default_length_class }})</font></td>
                    <td class="text-center">{{ entry_innerDepth }} <br><font style="color:#FF0000;font-size:14px">({{ default_length_class }})</font></td>
                    <td class="text-center">{{ entry_maxWeight }}<br><font style="color:#FF0000;font-size:14px">({{ default_weight_class }})</font></td>
                    <td class="text-center">{{ entry_price }}</td>
                    <td class="text-center">{{ entry_shipping_methods }}</td>
                    <td class="text-center">{{ edit_action }}</td>
                  </tr>
                  </thead>

                  <tbody>
                  {% set box_index = 0 %}
                  {% for box in boxes %}
                    <tr id="option-value-row{{ box_index }}">
                      <td class="text-left">
                        <input type="text"
                               name="packing_boxes[{{ box_index }}][reference]"
                               value="{{ box.reference }}" placeholder="{{ entry_reference }}"
                               class="form-control"/>
                      </td>
                      <td class="text-left">
                        <input type="text"
                               name="packing_boxes[{{ box_index }}][outerWidth]"
                               value="{{ box.outerWidth }}" placeholder="{{ entry_outerWidth }}"
                               class="form-control"/>
                      </td>
                      <td class="text-left">
                        <input type="text"
                               name="packing_boxes[{{ box_index }}][outerLength]"
                               value="{{ box.outerLength }}" placeholder="{{ entry_outerLength }}"
                               class="form-control"/>
                      </td>
                      <td class="text-left">
                        <input type="text"
                               name="packing_boxes[{{ box_index }}][outerDepth]"
                               value="{{ box.outerDepth }}" placeholder="{{ entry_outerDepth }}"
                               class="form-control"/>
                      </td>
                      <td class="text-left">
                        <input type="text"
                               name="packing_boxes[{{ box_index }}][emptyWeight]"
                               value="{{ box.emptyWeight }}" placeholder="{{ entry_emptyWeight }}"
                               class="form-control"/>
                      </td>
                      <td class="text-left">
                        <input type="text"
                               name="packing_boxes[{{ box_index }}][innerWidth]"
                               value="{{ box.innerWidth }}" placeholder="{{ entry_innerWidth }}"
                               class="form-control"/>
                      </td>
                      <td class="text-left">
                        <input type="text"
                               name="packing_boxes[{{ box_index }}][innerLength]"
                               value="{{ box.innerLength }}" placeholder="{{ entry_innerLength }}"
                               class="form-control"/>
                      </td>
                      <td class="text-left">
                        <input type="text"
                               name="packing_boxes[{{ box_index }}][innerDepth]"
                               value="{{ box.innerDepth }}" placeholder="{{ entry_innerDepth }}"
                               class="form-control"/>
                      </td>
                      <td class="text-left">
                        <input type="text"
                               name="packing_boxes[{{ box_index }}][maxWeight]"
                               value="{{ box.maxWeight }}" placeholder="{{ entry_maxWeight }}"
                               class="form-control"/>
                      </td>
                      <td class="text-left">
                        <input type="text" name="packing_boxes[{{ box_index }}][price]"
                               value="{{ box.price }}" placeholder="{{ entry_price }}"
                               class="form-control"/>
                      </td>
                      <td class="text-left">
                        {% for method in shipping_methods %}
                          <label>
                            <input name="packing_boxes[{{ box_index }}][shipping][]" type="checkbox" value="{{ method.code }}" {% if method.code in box.shipping %} checked {% endif %}>
                            {{ method.name }}
                          </label>
                        {% endfor %}
                      </td>
                      <td class="text-right">
                        <button type="button"
                                onclick="$(this).tooltip('destroy');$('#option-value-row{{ box_index }}').remove();"
                                data-toggle="tooltip" title="{{ button_remove }}" class="btn btn-danger">
                          <i class="fa fa-minus-circle"></i>
                        </button>
                      </td>
                    </tr>

                    {% set box_index = box_index + 1 %}
                  {% endfor %}

                  </tbody>
                  <tfoot>
                  <tr>
                    <td colspan="11"></td>
                    <td class="text-right"><button type="button" onclick="addOptionValue()" data-toggle="tooltip" title="{{ button_option_value_add }}" class="btn btn-primary"><i class="fa fa-plus-circle"></i></button></td>
                  </tr>
                  </tfoot>
                </table>
              </div>
              {% else %}
              <div>
                {{ text_no_supported_shipping }}
              </div>
              {% endif %}
            </div>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
<script type="text/javascript">
  var box_index = {{ box_index }};
  function addOptionValue() {
    html =  '<tr id="option-value-row' + box_index + '">';
    html += '  <td class="text-left"><input type="text" name="packing_boxes[' + box_index + '][reference]" value="" placeholder="{{ entry_reference }}" class="form-control" /></td>';
    html += '  <td class="text-left"><input type="text" name="packing_boxes[' + box_index + '][outerWidth]" value="" placeholder="{{ entry_outerWidth }}" class="form-control" /></td>';
    html += '  <td class="text-left"><input type="text" name="packing_boxes[' + box_index + '][outerLength]" value="" placeholder="{{ entry_outerLength }}" class="form-control" /></td>';
    html += '  <td class="text-left"><input type="text" name="packing_boxes[' + box_index + '][outerDepth]" value="" placeholder="{{ entry_outerDepth }}" class="form-control" /></td>';
    html += '  <td class="text-left"><input type="text" name="packing_boxes[' + box_index + '][emptyWeight]" value="" placeholder="{{ entry_emptyWeight }}" class="form-control" /></td>';
    html += '  <td class="text-left"><input type="text" name="packing_boxes[' + box_index + '][innerWidth]" value="" placeholder="{{ entry_innerWidth }}" class="form-control" /></td>';
    html += '  <td class="text-left"><input type="text" name="packing_boxes[' + box_index + '][innerLength]" value="" placeholder="{{ entry_innerLength }}" class="form-control" /></td>';
    html += '  <td class="text-left"><input type="text" name="packing_boxes[' + box_index + '][innerDepth]" value="" placeholder="{{ entry_innerDepth }}" class="form-control" /></td>';
    html += '  <td class="text-left"><input type="text" name="packing_boxes[' + box_index + '][maxWeight]" value="" placeholder="{{ entry_maxWeight }}" class="form-control" /></td>';
    html += '  <td class="text-left"><input type="text" name="packing_boxes[' + box_index + '][price]" value="" placeholder="{{ entry_price }}" class="form-control" /></td>';
    html += '  <td class="text-left">'
    {% for method in shipping_methods %}
    html += '<label> <input name="packing_boxes[{{ box_index }}][shipping][]" type="checkbox" value="{{ method.code }}">{{ method.name }}</label>'
    {% endfor %}
    html += '</td>';
    html += '  <td class="text-left"><button type="button" onclick="$(this).tooltip(\'destroy\');$(\'#option-value-row' + box_index + '\').remove();" data-toggle="tooltip" rel="tooltip" title="{{ button_remove }}" class="btn btn-danger"><i class="fa fa-minus-circle"></i></button></td>';
    html += '</tr>';
    $('#boxes tbody').append(html);
    $('[rel=tooltip]').tooltip();

    box_index++;

  }
</script>
{{ footer }}